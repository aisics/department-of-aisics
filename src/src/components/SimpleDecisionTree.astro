---
export interface Props {
  title?: string;
  example?: 'umbrella' | 'weekend' | 'pizza';
}

const {
  title = '–ü—Ä–∏–∫–ª–∞–¥ –¥–µ—Ä–µ–≤–∞ —Ä—ñ—à–µ–Ω—å / Decision Tree Example',
  example = 'umbrella'
} = Astro.props;

const examples = {
  umbrella: {
    title: '–ß–∏ –±—Ä–∞—Ç–∏ –ø–∞—Ä–∞—Å–æ–ª—å–∫—É? / Should I take an umbrella?',
    tree: {
      question: '–ß–∏ –π–¥–µ –¥–æ—â? / Is it raining?',
      left: {
        label: '–¢–∞–∫ / Yes',
        result: '‚òÇÔ∏è –í—ñ–∑—å–º–∏ –ø–∞—Ä–∞—Å–æ–ª—å–∫—É / Take umbrella',
        color: '#667eea'
      },
      right: {
        label: '–ù—ñ / No',
        question: '–ß–∏ —Ö–º–∞—Ä–Ω–æ? / Is it cloudy?',
        left: {
          label: '–¢–∞–∫ / Yes',
          result: 'üåÇ –í—ñ–∑—å–º–∏ –Ω–∞ –≤—Å—è–∫ / Take just in case',
          color: '#9333ea'
        },
        right: {
          label: '–ù—ñ / No',
          result: '‚òÄÔ∏è –ù–µ –ø–æ—Ç—Ä—ñ–±–Ω–∞ / No need',
          color: '#f093fb'
        }
      }
    }
  },
  weekend: {
    title: '–ß–∏–º –∑–∞–π–Ω—è—Ç–∏—Å—å –Ω–∞ –≤–∏—Ö—ñ–¥–Ω–∏—Ö? / Weekend activity?',
    tree: {
      question: '–ü–æ–≥–æ–¥–∞ —Ö–æ—Ä–æ—à–∞? / Nice weather?',
      left: {
        label: '–¢–∞–∫ / Yes',
        question: '–Ñ –∫–æ–º–ø–∞–Ω—ñ—è? / Have company?',
        left: {
          label: '–¢–∞–∫ / Yes',
          result: 'üèûÔ∏è –ü—ñ–∫–Ω—ñ–∫ / Picnic',
          color: '#10b981'
        },
        right: {
          label: '–ù—ñ / No',
          result: 'üö¥ –í–µ–ª–æ–ø—Ä–æ–≥—É–ª—è–Ω–∫–∞ / Bike ride',
          color: '#3b82f6'
        }
      },
      right: {
        label: '–ù—ñ / No',
        question: '–Ñ –Ω–∞—Å—Ç—Ä—ñ–π? / Feeling good?',
        left: {
          label: '–¢–∞–∫ / Yes',
          result: 'üé¨ –ö—ñ–Ω–æ / Movie',
          color: '#8b5cf6'
        },
        right: {
          label: '–ù—ñ / No',
          result: 'üò¥ –ü–æ—Å–ø–∞—Ç–∏ / Sleep',
          color: '#6366f1'
        }
      }
    }
  },
  pizza: {
    title: '–Ø–∫—É –ø—ñ—Ü—É –∑–∞–º–æ–≤–∏—Ç–∏? / Which pizza to order?',
    tree: {
      question: '–õ—é–±–∏—à –º\'—è—Å–æ? / Like meat?',
      left: {
        label: '–¢–∞–∫ / Yes',
        question: '–ì–æ—Å—Ç—Ä—ñ —Å—Ç—Ä–∞–≤–∏? / Spicy food?',
        left: {
          label: '–¢–∞–∫ / Yes',
          result: 'üå∂Ô∏è –ü–µ–ø–µ—Ä–æ–Ω—ñ / Pepperoni',
          color: '#ef4444'
        },
        right: {
          label: '–ù—ñ / No',
          result: 'üçñ –ú\'—è—Å–Ω–∞ / Meat lovers',
          color: '#f97316'
        }
      },
      right: {
        label: '–ù—ñ / No',
        question: '–õ—é–±–∏—à –æ–≤–æ—á—ñ? / Like vegetables?',
        left: {
          label: '–¢–∞–∫ / Yes',
          result: 'ü•ó –í–µ–≥–µ—Ç–∞—Ä—ñ–∞–Ω—Å—å–∫–∞ / Vegetarian',
          color: '#22c55e'
        },
        right: {
          label: '–ù—ñ / No',
          result: 'üßÄ –ú–∞—Ä–≥–∞—Ä–∏—Ç–∞ / Margherita',
          color: '#eab308'
        }
      }
    }
  }
};

const selectedExample = examples[example];
---

<div class="simple-tree">
  <div class="tree-header">
    <h3>{title}</h3>
    <p class="tree-subtitle">{selectedExample.title}</p>
  </div>

  <div class="tree-container">
    <svg width="100%" height="420" class="decision-tree-svg">
      <!-- Root Node -->
      <g class="node">
        <rect x="250" y="20" width="200" height="60" rx="8" fill="white" stroke="#667eea" stroke-width="3"/>
        <text x="350" y="50" text-anchor="middle" fill="#2c3e50" font-size="13" font-weight="600">
          {selectedExample.tree.question.split(' / ')[0]}
        </text>
        <text x="350" y="65" text-anchor="middle" fill="#666" font-size="11">
          {selectedExample.tree.question.split(' / ')[1]}
        </text>
      </g>

      <!-- Left Branch -->
      <line x1="300" y1="80" x2="200" y2="140" stroke="#667eea" stroke-width="2"/>
      <text x="235" y="105" fill="#667eea" font-size="12" font-weight="bold">
        {selectedExample.tree.left.label.split(' / ')[0]}
      </text>

      {selectedExample.tree.left.result ? (
        <!-- Left Leaf -->
        <g class="leaf">
          <rect x="100" y="150" width="200" height="60" rx="8" fill="white" stroke={selectedExample.tree.left.color} stroke-width="3"/>
          <text x="200" y="175" text-anchor="middle" fill={selectedExample.tree.left.color} font-size="14" font-weight="700">
            {selectedExample.tree.left.result.split(' / ')[0]}
          </text>
          <text x="200" y="195" text-anchor="middle" fill="#666" font-size="11">
            {selectedExample.tree.left.result.split(' / ')[1]}
          </text>
        </g>
      ) : (
        <!-- Left Internal Node -->
        <g class="node">
          <rect x="100" y="150" width="200" height="60" rx="8" fill="white" stroke="#667eea" stroke-width="3"/>
          <text x="200" y="175" text-anchor="middle" fill="#2c3e50" font-size="12" font-weight="600">
            {selectedExample.tree.left.question.split(' / ')[0]}
          </text>
          <text x="200" y="190" text-anchor="middle" fill="#666" font-size="10">
            {selectedExample.tree.left.question.split(' / ')[1]}
          </text>
        </g>

        <!-- Left-Left Branch -->
        <line x1="150" y1="210" x2="100" y2="270" stroke="#667eea" stroke-width="2"/>
        <text x="115" y="235" fill="#667eea" font-size="11" font-weight="bold">
          {selectedExample.tree.left.left.label.split(' / ')[0]}
        </text>

        <!-- Left-Left Leaf -->
        <g class="leaf">
          <rect x="20" y="280" width="160" height="55" rx="8" fill="white" stroke={selectedExample.tree.left.left.color} stroke-width="3"/>
          <text x="100" y="303" text-anchor="middle" fill={selectedExample.tree.left.left.color} font-size="13" font-weight="700">
            {selectedExample.tree.left.left.result.split(' / ')[0]}
          </text>
          <text x="100" y="320" text-anchor="middle" fill="#666" font-size="10">
            {selectedExample.tree.left.left.result.split(' / ')[1]}
          </text>
        </g>

        <!-- Left-Right Branch -->
        <line x1="250" y1="210" x2="280" y2="270" stroke="#667eea" stroke-width="2"/>
        <text x="270" y="235" fill="#667eea" font-size="11" font-weight="bold">
          {selectedExample.tree.left.right.label.split(' / ')[0]}
        </text>

        <!-- Left-Right Leaf -->
        <g class="leaf">
          <rect x="200" y="280" width="160" height="55" rx="8" fill="white" stroke={selectedExample.tree.left.right.color} stroke-width="3"/>
          <text x="280" y="303" text-anchor="middle" fill={selectedExample.tree.left.right.color} font-size="13" font-weight="700">
            {selectedExample.tree.left.right.result.split(' / ')[0]}
          </text>
          <text x="280" y="320" text-anchor="middle" fill="#666" font-size="10">
            {selectedExample.tree.left.right.result.split(' / ')[1]}
          </text>
        </g>
      )}

      <!-- Right Branch -->
      <line x1="400" y1="80" x2="500" y2="140" stroke="#667eea" stroke-width="2"/>
      <text x="465" y="105" fill="#667eea" font-size="12" font-weight="bold">
        {selectedExample.tree.right.label.split(' / ')[0]}
      </text>

      {selectedExample.tree.right.result ? (
        <!-- Right Leaf -->
        <g class="leaf">
          <rect x="400" y="150" width="200" height="60" rx="8" fill="white" stroke={selectedExample.tree.right.color} stroke-width="3"/>
          <text x="500" y="175" text-anchor="middle" fill={selectedExample.tree.right.color} font-size="14" font-weight="700">
            {selectedExample.tree.right.result.split(' / ')[0]}
          </text>
          <text x="500" y="195" text-anchor="middle" fill="#666" font-size="11">
            {selectedExample.tree.right.result.split(' / ')[1]}
          </text>
        </g>
      ) : (
        <!-- Right Internal Node -->
        <g class="node">
          <rect x="400" y="150" width="200" height="60" rx="8" fill="white" stroke="#667eea" stroke-width="3"/>
          <text x="500" y="175" text-anchor="middle" fill="#2c3e50" font-size="12" font-weight="600">
            {selectedExample.tree.right.question.split(' / ')[0]}
          </text>
          <text x="500" y="190" text-anchor="middle" fill="#666" font-size="10">
            {selectedExample.tree.right.question.split(' / ')[1]}
          </text>
        </g>

        <!-- Right-Left Branch -->
        <line x1="450" y1="210" x2="420" y2="270" stroke="#667eea" stroke-width="2"/>
        <text x="425" y="235" fill="#667eea" font-size="11" font-weight="bold">
          {selectedExample.tree.right.left.label.split(' / ')[0]}
        </text>

        <!-- Right-Left Leaf -->
        <g class="leaf">
          <rect x="340" y="280" width="160" height="55" rx="8" fill="white" stroke={selectedExample.tree.right.left.color} stroke-width="3"/>
          <text x="420" y="303" text-anchor="middle" fill={selectedExample.tree.right.left.color} font-size="13" font-weight="700">
            {selectedExample.tree.right.left.result.split(' / ')[0]}
          </text>
          <text x="420" y="320" text-anchor="middle" fill="#666" font-size="10">
            {selectedExample.tree.right.left.result.split(' / ')[1]}
          </text>
        </g>

        <!-- Right-Right Branch -->
        <line x1="550" y1="210" x2="600" y2="270" stroke="#667eea" stroke-width="2"/>
        <text x="585" y="235" fill="#667eea" font-size="11" font-weight="bold">
          {selectedExample.tree.right.right.label.split(' / ')[0]}
        </text>

        <!-- Right-Right Leaf -->
        <g class="leaf">
          <rect x="520" y="280" width="160" height="55" rx="8" fill="white" stroke={selectedExample.tree.right.right.color} stroke-width="3"/>
          <text x="600" y="303" text-anchor="middle" fill={selectedExample.tree.right.right.color} font-size="13" font-weight="700">
            {selectedExample.tree.right.right.result.split(' / ')[0]}
          </text>
          <text x="600" y="320" text-anchor="middle" fill="#666" font-size="10">
            {selectedExample.tree.right.right.result.split(' / ')[1]}
          </text>
        </g>
      )}
    </svg>

    <div class="tree-explanation">
      <p>
        <strong>–Ø–∫ —á–∏—Ç–∞—Ç–∏ –¥–µ—Ä–µ–≤–æ / How to read the tree:</strong>
      </p>
      <ol>
        <li>üîµ <strong>–ü–æ—á–∏–Ω–∞—î–º–æ –∑ –∫–æ—Ä–µ–Ω—è / Start at the root</strong> ‚Äî –ø–µ—Ä—à–µ –ø–∏—Ç–∞–Ω–Ω—è –≤–≥–æ—Ä—ñ</li>
        <li>‚û°Ô∏è <strong>–í—ñ–¥–ø–æ–≤—ñ–¥–∞—î–º–æ –¢–∞–∫/–ù—ñ / Answer Yes/No</strong> ‚Äî –π–¥–µ–º–æ –ª—ñ–≤–æ—é –∞–±–æ –ø—Ä–∞–≤–æ—é –≥—ñ–ª–∫–æ—é</li>
        <li>üîÅ <strong>–ü–æ–≤—Ç–æ—Ä—é—î–º–æ / Repeat</strong> ‚Äî –ø–æ–∫–∏ –Ω–µ –¥—ñ–π–¥–µ–º–æ –¥–æ –ª–∏—Å—Ç–∫–∞ (–∫—ñ–Ω—Ü–µ–≤–µ —Ä—ñ—à–µ–Ω–Ω—è)</li>
        <li>‚úÖ <strong>–û—Ç—Ä–∏–º—É—î–º–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç / Get result</strong> ‚Äî –ª–∏—Å—Ç–æ–∫ –ø–æ–∫–∞–∑—É—î —Ñ—ñ–Ω–∞–ª—å–Ω—É –≤—ñ–¥–ø–æ–≤—ñ–¥—å</li>
      </ol>
    </div>
  </div>
</div>

<style>
  .simple-tree {
    margin: 2rem 0;
    border: 1px solid #e0e0e0;
    border-radius: 12px;
    overflow: hidden;
    background: white;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  }

  .tree-header {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    padding: 1.5rem;
    text-align: center;
  }

  .tree-header h3 {
    margin: 0 0 0.5rem 0;
    font-size: 1.5rem;
    font-weight: 600;
  }

  .tree-subtitle {
    margin: 0;
    font-size: 1.1rem;
    opacity: 0.95;
    font-weight: 500;
  }

  .tree-container {
    padding: 2rem;
    background: #f8f9fa;
  }

  .decision-tree-svg {
    display: block;
    margin: 0 auto 2rem;
    background: white;
    border-radius: 8px;
    padding: 1rem;
    max-width: 720px;
  }

  .tree-explanation {
    background: white;
    padding: 1.5rem;
    border-radius: 8px;
    border-left: 4px solid #667eea;
  }

  .tree-explanation p {
    margin: 0 0 1rem 0;
    font-size: 1rem;
    color: #2c3e50;
  }

  .tree-explanation ol {
    margin: 0;
    padding-left: 1.5rem;
  }

  .tree-explanation li {
    margin: 0.75rem 0;
    font-size: 0.95rem;
    color: #555;
    line-height: 1.6;
  }

  @media (max-width: 768px) {
    .decision-tree-svg {
      max-width: 100%;
      overflow-x: auto;
    }

    .tree-header h3 {
      font-size: 1.2rem;
    }

    .tree-subtitle {
      font-size: 1rem;
    }
  }
</style>
