---
title: "Матричні перетворення - малюємо гриб"
description: "Як матриці перетворюють зображення: обертання, відзеркалення, інверсія кольорів та інші трансформації на прикладі пікселей"
author: "Кафедра ШІзики"
date: 2025-07-24
readingTime: 15
tags: ["матриці", "трансформації", "обробка-зображень", "візуалізація", "математика"]
featured: true
difficulty: "beginner"
category: "Basics"
prerequisites: ["vectors-in-ai", "matrixes-in-ai"]
relatedArticles: []
---

# Лекція 3: Матричні перетворення – Магія трансформації даних 🎨

У попередніх лекціях ми дізналися, що матриці можуть зберігати дані та виконувати над ними операції. Але справжня магія починається, коли ми використовуємо матриці для **перетворення** даних. Сьогодні ми намалюємо гриб числами і навчимося його трансформувати!

<div style="background: #fef3c7; border: 2px solid #f59e0b; border-radius: 8px; padding: 1rem; margin: 1rem 0;">
<strong>⚠️ Навчальне спрощення:</strong><br/>
Усі приклади в цій лекції спрощені для кращого розуміння концепцій. Реальні алгоритми обробки зображень можуть бути складнішими. Матриця 10×10 використовується лише для наочності – справжні зображення мають сотні або тисячі пікселів у кожному вимірі. Візуалізації та розрахунки можуть бути наближеними для збереження простоти пояснення.
</div>

## Малюємо гриб матрицею 🍄

Уявімо, що в нас є зображення гриба. Зображення це фактично матриця пікселів, де кожен з них має свої певні характеристики, в нашому випадку зупинимось на кольорі.

Отже, нехай ми маємо наступну палітру кольорів:
- **0** = чорний (⬛)
- **1** = темно-сірий (🔲)
- **2** = світло-сірий (🔳)
- **3** = білий (⬜)

А отже, наш гриб у вигляді матриці 10×10 і за нашою палітрою буде виглядати ось так:

$$
\text{Гриб} = \begin{pmatrix}
0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 \\
0 & 0 & 1 & 2 & 2 & 2 & 2 & 1 & 0 & 0 \\
0 & 1 & 2 & 3 & 3 & 3 & 3 & 2 & 1 & 0 \\
0 & 2 & 3 & 3 & 1 & 1 & 3 & 3 & 2 & 0 \\
0 & 2 & 3 & 1 & 3 & 3 & 1 & 3 & 2 & 0 \\
0 & 1 & 2 & 3 & 3 & 3 & 3 & 2 & 1 & 0 \\
0 & 0 & 0 & 1 & 2 & 2 & 1 & 0 & 0 & 0 \\
0 & 0 & 0 & 1 & 2 & 2 & 1 & 0 & 0 & 0 \\
0 & 0 & 0 & 1 & 2 & 2 & 1 & 0 & 0 & 0 \\
0 & 0 & 0 & 0 & 1 & 1 & 0 & 0 & 0 & 0
\end{pmatrix}
$$

**Візуалізація:**

<div style="font-family: monospace; line-height: 1; font-size: 1.2rem; letter-spacing: 0.05em;">
⬛⬛⬛⬛⬛⬛⬛⬛⬛⬛<br/>
⬛⬛🔲🔳🔳🔳🔳🔲⬛⬛<br/>
⬛🔲🔳⬜⬜⬜⬜🔳🔲⬛<br/>
⬛🔳⬜⬜🔲🔲⬜⬜🔳⬛<br/>
⬛🔳⬜🔲⬜⬜🔲⬜🔳⬛<br/>
⬛🔲🔳⬜⬜⬜⬜🔳🔲⬛<br/>
⬛⬛⬛🔲🔳🔳🔲⬛⬛⬛<br/>
⬛⬛⬛🔲🔳🔳🔲⬛⬛⬛<br/>
⬛⬛⬛🔲🔳🔳🔲⬛⬛⬛<br/>
⬛⬛⬛⬛🔲🔲⬛⬛⬛⬛
</div>

## Розпізнавання образів – як ШІ "бачить" гриб? 👁️

Перш ніж трансформувати зображення, давайте зрозуміємо, як комп'ютер взагалі розпізнає, що на картинці є гриб. Це основа комп'ютерного зору!

### Еталонний гриб (те, що ми шукаємо):

$$
\text{Еталон} = \begin{pmatrix}
0 & 0 & 1 & 1 & 1 & 1 & 1 & 1 & 0 & 0 \\
0 & 1 & 2 & 2 & 3 & 3 & 2 & 2 & 1 & 0 \\
1 & 2 & 3 & 3 & 3 & 3 & 3 & 3 & 2 & 1 \\
1 & 3 & 3 & 2 & 1 & 1 & 2 & 3 & 3 & 1 \\
1 & 2 & 3 & 3 & 3 & 3 & 3 & 3 & 2 & 1 \\
0 & 1 & 2 & 2 & 2 & 2 & 2 & 2 & 1 & 0 \\
0 & 0 & 0 & 1 & 2 & 2 & 1 & 0 & 0 & 0 \\
0 & 0 & 0 & 1 & 2 & 2 & 1 & 0 & 0 & 0 \\
0 & 0 & 0 & 1 & 1 & 1 & 1 & 0 & 0 & 0 \\
0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0
\end{pmatrix}
$$

### Наше зображення (трохи інший гриб):

$$
\text{Наш гриб} = \begin{pmatrix}
0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 \\
0 & 0 & 1 & 2 & 2 & 2 & 2 & 1 & 0 & 0 \\
0 & 1 & 2 & 3 & 3 & 3 & 3 & 2 & 1 & 0 \\
0 & 2 & 3 & 3 & 1 & 1 & 3 & 3 & 2 & 0 \\
0 & 2 & 3 & 1 & 3 & 3 & 1 & 3 & 2 & 0 \\
0 & 1 & 2 & 3 & 3 & 3 & 3 & 2 & 1 & 0 \\
0 & 0 & 0 & 1 & 2 & 2 & 1 & 0 & 0 & 0 \\
0 & 0 & 0 & 1 & 2 & 2 & 1 & 0 & 0 & 0 \\
0 & 0 & 0 & 1 & 2 & 2 & 1 & 0 & 0 & 0 \\
0 & 0 & 0 & 0 & 1 & 1 & 0 & 0 & 0 & 0
\end{pmatrix}
$$

**Візуалізації для порівняння:**

<div style="display: flex; gap: 2rem; align-items: flex-start; flex-wrap: wrap;">
  <div style="text-align: center;">
    <p style="margin-bottom: 0.5rem; font-weight: bold;">Еталон:</p>
    <div style="font-family: monospace; line-height: 1; font-size: 1.2rem; letter-spacing: 0.05em;">
⬛⬛🔲🔲🔲🔲🔲🔲⬛⬛<br/>
⬛🔲🔳🔳⬜⬜🔳🔳🔲⬛<br/>
🔲🔳⬜⬜⬜⬜⬜⬜🔳🔲<br/>
🔲⬜⬜🔳🔲🔲🔳⬜⬜🔲<br/>
🔲🔳⬜⬜⬜⬜⬜⬜🔳🔲<br/>
⬛🔲🔳🔳🔳🔳🔳🔳🔲⬛<br/>
⬛⬛⬛🔲🔳🔳🔲⬛⬛⬛<br/>
⬛⬛⬛🔲🔳🔳🔲⬛⬛⬛<br/>
⬛⬛⬛🔲🔲🔲🔲⬛⬛⬛<br/>
⬛⬛⬛⬛⬛⬛⬛⬛⬛⬛
    </div>
  </div>
  <div style="text-align: center;">
    <p style="margin-bottom: 0.5rem; font-weight: bold;">Наш гриб:</p>
    <div style="font-family: monospace; line-height: 1; font-size: 1.2rem; letter-spacing: 0.05em;">
⬛⬛⬛⬛⬛⬛⬛⬛⬛⬛<br/>
⬛⬛🔲🔳🔳🔳🔳🔲⬛⬛<br/>
⬛🔲🔳⬜⬜⬜⬜🔳🔲⬛<br/>
⬛🔳⬜⬜🔲🔲⬜⬜🔳⬛<br/>
⬛🔳⬜🔲⬜⬜🔲⬜🔳⬛<br/>
⬛🔲🔳⬜⬜⬜⬜🔳🔲⬛<br/>
⬛⬛⬛🔲🔳🔳🔲⬛⬛⬛<br/>
⬛⬛⬛🔲🔳🔳🔲⬛⬛⬛<br/>
⬛⬛⬛🔲🔳🔳🔲⬛⬛⬛<br/>
⬛⬛⬛⬛🔲🔲⬛⬛⬛⬛
    </div>
  </div>
</div>

### Як порівняти? Обчислюємо різницю:

$$
\text{Різниця} = |\text{Еталон} - \text{Наш гриб}|
$$

Де |...| означає абсолютне значення кожного елемента.

**Результат:**
$$
\text{Різниця} = \begin{pmatrix}
0 & 0 & 1 & 1 & 1 & 1 & 1 & 1 & 0 & 0 \\
0 & 1 & 1 & 0 & 1 & 1 & 0 & 1 & 1 & 0 \\
1 & 1 & 1 & 0 & 0 & 0 & 0 & 1 & 1 & 1 \\
1 & 1 & 0 & 0 & 0 & 0 & 1 & 0 & 1 & 1 \\
1 & 0 & 0 & 2 & 0 & 0 & 2 & 0 & 0 & 1 \\
0 & 0 & 0 & 1 & 1 & 1 & 1 & 0 & 0 & 0 \\
0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 \\
0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 \\
0 & 0 & 0 & 0 & 1 & 1 & 0 & 0 & 0 & 0 \\
0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0
\end{pmatrix}
$$

**Візуалізація різниці (чим світліше, тим більша різниця):**

<div style="font-family: monospace; line-height: 1; font-size: 1.2rem; letter-spacing: 0.05em;">
⬛⬛🔲🔲🔲🔲🔲🔲⬛⬛<br/>
⬛🔲🔲⬛🔲🔲⬛🔲🔲⬛<br/>
🔲🔲🔲⬛⬛⬛⬛🔲🔲🔲<br/>
🔲🔲⬛⬛⬛⬛🔲⬛🔲🔲<br/>
🔲⬛⬛🔳⬛⬛🔳⬛⬛🔲<br/>
⬛⬛⬛🔲🔲🔲🔲⬛⬛⬛<br/>
⬛⬛⬛⬛⬛⬛⬛⬛⬛⬛<br/>
⬛⬛⬛⬛⬛⬛⬛⬛⬛⬛<br/>
⬛⬛⬛⬛🔲🔲⬛⬛⬛⬛<br/>
⬛⬛⬛⬛⬛⬛⬛⬛⬛⬛
</div>

### Оцінка схожості:

#### Крок 1: Рахуємо суму всіх різниць
Додаємо всі числа з матриці різниць:
- Рядок 1: 0+0+1+1+1+1+1+1+0+0 = **6**
- Рядок 2: 0+1+1+0+1+1+0+1+1+0 = **6**
- Рядок 3: 1+1+1+0+0+0+0+1+1+1 = **6**
- Рядок 4: 1+1+0+0+0+0+1+0+1+1 = **5**
- Рядок 5: 1+0+0+2+0+0+2+0+0+1 = **6**
- Рядок 6: 0+0+0+1+1+1+1+0+0+0 = **4**
- Рядки 7-8: всі нулі = **0**
- Рядок 9: 0+0+0+0+1+1+0+0+0+0 = **2**
- Рядок 10: всі нулі = **0**

**Сума всіх різниць:** 6+6+6+5+6+4+0+0+2+0 = **28**

#### Крок 2: Обчислюємо максимально можливу різницю
Якби наш гриб був повністю протилежним еталону:
- Кожен піксель міг би відрізнятися максимум на 3 (від 0 до 3)
- У нас 10×10 = 100 пікселів
- Максимальна різниця: 100 × 3 = **300**

#### Крок 3: Переводимо в відсоток схожості
$$
\text{Схожість} = \frac{\text{Макс. різниця} - \text{Фактична різниця}}{\text{Макс. різниця}} \times 100\%
$$

$$
\text{Схожість} = \frac{300 - 28}{300} \times 100\% = \frac{272}{300} \times 100\% = 90.7\%
$$

<div style="background: linear-gradient(to right, #10b981, #3b82f6); padding: 2px; border-radius: 8px; margin: 1rem 0;">
<div style="background: white; padding: 1rem; border-radius: 6px;">
<strong>Висновок:</strong> З 90.7% схожістю це справді гриб! 🎉<br/>
ШІ вважає зображення грибом, якщо схожість > 85%
</div>
</div>

### Де найбільші відмінності?

Дивлячись на матрицю різниць, бачимо:
- **Капелюшок ширший** в еталоні (верхній рядок)
- **Плямки на капелюшку** розташовані по-різному (значення 2 в рядку 5)
- **Ніжка коротша** в нашому грибі (різниця в останньому рядку)

Саме так працюють алгоритми розпізнавання образів – порівнюють матриці пікселів!

## Інверсія кольорів – негатив зображення 🔄

Щоб створити негатив, віднімаємо кожне значення від максимального (3):

$$
\text{Негатив} = 3 - \text{Гриб}
$$

**Операція поелементно:**
- Чорний (0) → Білий (3)
- Темно-сірий (1) → Світло-сірий (2)
- Світло-сірий (2) → Темно-сірий (1)
- Білий (3) → Чорний (0)

$$
\text{Негатив} = \begin{pmatrix}
3 & 3 & 3 & 3 & 3 & 3 & 3 & 3 & 3 & 3 \\
3 & 3 & 2 & 1 & 1 & 1 & 1 & 2 & 3 & 3 \\
3 & 2 & 1 & 0 & 0 & 0 & 0 & 1 & 2 & 3 \\
3 & 1 & 0 & 0 & 2 & 2 & 0 & 0 & 1 & 3 \\
3 & 1 & 0 & 2 & 0 & 0 & 2 & 0 & 1 & 3 \\
3 & 2 & 1 & 0 & 0 & 0 & 0 & 1 & 2 & 3 \\
3 & 3 & 3 & 2 & 1 & 1 & 2 & 3 & 3 & 3 \\
3 & 3 & 3 & 2 & 1 & 1 & 2 & 3 & 3 & 3 \\
3 & 3 & 3 & 2 & 1 & 1 & 2 & 3 & 3 & 3 \\
3 & 3 & 3 & 3 & 2 & 2 & 3 & 3 & 3 & 3
\end{pmatrix}
$$

**Візуалізація негативу:**

<div style="font-family: monospace; line-height: 1; font-size: 1.2rem; letter-spacing: 0.05em;">
⬜⬜⬜⬜⬜⬜⬜⬜⬜⬜<br/>
⬜⬜🔳🔲🔲🔲🔲🔳⬜⬜<br/>
⬜🔳🔲⬛⬛⬛⬛🔲🔳⬜<br/>
⬜🔲⬛⬛🔳🔳⬛⬛🔲⬜<br/>
⬜🔲⬛🔳⬛⬛🔳⬛🔲⬜<br/>
⬜🔳🔲⬛⬛⬛⬛🔲🔳⬜<br/>
⬜⬜⬜🔳🔲🔲🔳⬜⬜⬜<br/>
⬜⬜⬜🔳🔲🔲🔳⬜⬜⬜<br/>
⬜⬜⬜🔳🔲🔲🔳⬜⬜⬜<br/>
⬜⬜⬜⬜🔳🔳⬜⬜⬜⬜
</div>

Тепер наш гриб світиться на темному фоні! ✨

## Горизонтальне відзеркалення 🪞

Для відзеркалення по горизонталі просто переставляємо стовпці в зворотному порядку:

$$
\text{Дзеркало} = \begin{pmatrix}
0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 \\
0 & 0 & 1 & 2 & 2 & 2 & 2 & 1 & 0 & 0 \\
0 & 1 & 2 & 3 & 3 & 3 & 3 & 2 & 1 & 0 \\
0 & 2 & 3 & 3 & 1 & 1 & 3 & 3 & 2 & 0 \\
0 & 2 & 3 & 1 & 3 & 3 & 1 & 3 & 2 & 0 \\
0 & 1 & 2 & 3 & 3 & 3 & 3 & 2 & 1 & 0 \\
0 & 0 & 0 & 1 & 2 & 2 & 1 & 0 & 0 & 0 \\
0 & 0 & 0 & 1 & 2 & 2 & 1 & 0 & 0 & 0 \\
0 & 0 & 0 & 1 & 2 & 2 & 1 & 0 & 0 & 0 \\
0 & 0 & 0 & 0 & 1 & 1 & 0 & 0 & 0 & 0
\end{pmatrix} \times P
$$

Де P – матриця перестановки для відзеркалення:

$$
P = \begin{pmatrix}
0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 1 \\
0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 1 & 0 \\
0 & 0 & 0 & 0 & 0 & 0 & 0 & 1 & 0 & 0 \\
0 & 0 & 0 & 0 & 0 & 0 & 1 & 0 & 0 & 0 \\
0 & 0 & 0 & 0 & 0 & 1 & 0 & 0 & 0 & 0 \\
0 & 0 & 0 & 0 & 1 & 0 & 0 & 0 & 0 & 0 \\
0 & 0 & 0 & 1 & 0 & 0 & 0 & 0 & 0 & 0 \\
0 & 0 & 1 & 0 & 0 & 0 & 0 & 0 & 0 & 0 \\
0 & 1 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 \\
1 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0
\end{pmatrix}
$$

**Візуалізація відзеркаленого гриба:**

<div style="font-family: monospace; line-height: 1; font-size: 1.2rem; letter-spacing: 0.05em;">
⬛⬛⬛⬛⬛⬛⬛⬛⬛⬛<br/>
⬛⬛🔲🔳🔳🔳🔳🔲⬛⬛<br/>
⬛🔲🔳⬜⬜⬜⬜🔳🔲⬛<br/>
⬛🔳⬜⬜🔲🔲⬜⬜🔳⬛<br/>
⬛🔳⬜🔲⬜⬜🔲⬜🔳⬛<br/>
⬛🔲🔳⬜⬜⬜⬜🔳🔲⬛<br/>
⬛⬛⬛🔲🔳🔳🔲⬛⬛⬛<br/>
⬛⬛⬛🔲🔳🔳🔲⬛⬛⬛<br/>
⬛⬛⬛🔲🔳🔳🔲⬛⬛⬛<br/>
⬛⬛⬛⬛🔲🔲⬛⬛⬛⬛
</div>

гриб дивиться в інший бік! (Хоча в цьому випадку він симетричний)

## Виділення частин зображення – маска 🎭

Хочемо виділити тільки капелюшок гриба? Створюємо матрицю-маску:

### Як будуємо маску:
1. **Визначаємо область капелюшка**: дивимось на оригінальний гриб і бачимо, що капелюшок займає рядки 1-6
2. **Ставимо 1 там, де хочемо зберегти зображення**: в області капелюшка
3. **Ставимо 0 там, де хочемо видалити зображення**: в області ніжки та навколо

$$
\text{Маска капелюшка} = \begin{pmatrix}
0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 \\
0 & 0 & 1 & 1 & 1 & 1 & 1 & 1 & 0 & 0 \\
0 & 1 & 1 & 1 & 1 & 1 & 1 & 1 & 1 & 0 \\
0 & 1 & 1 & 1 & 1 & 1 & 1 & 1 & 1 & 0 \\
0 & 1 & 1 & 1 & 1 & 1 & 1 & 1 & 1 & 0 \\
0 & 1 & 1 & 1 & 1 & 1 & 1 & 1 & 1 & 0 \\
0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 \\
0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 \\
0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 \\
0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0
\end{pmatrix}
$$

**Поелементне множення** (операція Адамара):

$$
\text{Капелюшок} = \text{Гриб} \odot \text{Маска}
$$

**Візуалізація виділеного капелюшка:**

<div style="font-family: monospace; line-height: 1; font-size: 1.2rem; letter-spacing: 0.05em;">
⬛⬛⬛⬛⬛⬛⬛⬛⬛⬛<br/>
⬛⬛🔲🔳🔳🔳🔳🔲⬛⬛<br/>
⬛🔲🔳⬜⬜⬜⬜🔳🔲⬛<br/>
⬛🔳⬜⬜🔲🔲⬜⬜🔳⬛<br/>
⬛🔳⬜🔲⬜⬜🔲⬜🔳⬛<br/>
⬛🔲🔳⬜⬜⬜⬜🔳🔲⬛<br/>
⬛⬛⬛⬛⬛⬛⬛⬛⬛⬛<br/>
⬛⬛⬛⬛⬛⬛⬛⬛⬛⬛<br/>
⬛⬛⬛⬛⬛⬛⬛⬛⬛⬛<br/>
⬛⬛⬛⬛⬛⬛⬛⬛⬛⬛
</div>

Результат – тільки капелюшок гриба, решта пікселів чорні!

### Альтернативний підхід – через віднімання:
Якби у нас була окрема матриця ніжки гриба, ми могли б отримати той самий результат через віднімання:

$$
\text{Капелюшок} = \text{Гриб} - \text{Ніжка}
$$

Де матриця ніжки містить значення тільки в нижній частині (рядки 7-10). Це показує, що в обробці зображень часто існує кілька способів досягти одного результату!

## Обертання на 90 градусів 🔄

Для обертання на 90° за годинниковою стрілкою:
1. Транспонуємо матрицю (міняємо рядки і стовпці)
2. Відзеркалюємо кожен рядок (реверсуємо порядок елементів у кожному рядку)

**Крок 1 - Транспонування:**

При транспонуванні рядки стають стовпцями:

$$
\text{Гриб}^T = \begin{pmatrix}
0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 \\
0 & 0 & 1 & 2 & 2 & 1 & 0 & 0 & 0 & 0 \\
0 & 1 & 2 & 3 & 3 & 2 & 0 & 0 & 0 & 0 \\
0 & 2 & 3 & 3 & 1 & 3 & 1 & 1 & 1 & 0 \\
0 & 2 & 3 & 1 & 3 & 3 & 2 & 2 & 2 & 1 \\
0 & 2 & 3 & 1 & 3 & 3 & 2 & 2 & 2 & 1 \\
0 & 2 & 3 & 3 & 1 & 3 & 1 & 1 & 1 & 0 \\
0 & 1 & 2 & 3 & 3 & 2 & 0 & 0 & 0 & 0 \\
0 & 0 & 1 & 2 & 2 & 1 & 0 & 0 & 0 & 0 \\
0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0
\end{pmatrix}
$$

**Крок 2 - Реверс кожного рядка:**

Тепер змінюємо порядок елементів у кожному рядку:

$$
\text{Гриб}_{90°} = \begin{pmatrix}
0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 \\
0 & 0 & 0 & 0 & 1 & 2 & 2 & 1 & 0 & 0 \\
0 & 0 & 0 & 0 & 2 & 3 & 3 & 2 & 1 & 0 \\
0 & 1 & 1 & 1 & 3 & 1 & 3 & 3 & 2 & 0 \\
1 & 2 & 2 & 2 & 3 & 3 & 1 & 3 & 2 & 0 \\
1 & 2 & 2 & 2 & 3 & 3 & 1 & 3 & 2 & 0 \\
0 & 1 & 1 & 1 & 3 & 1 & 3 & 3 & 2 & 0 \\
0 & 0 & 0 & 0 & 2 & 3 & 3 & 2 & 1 & 0 \\
0 & 0 & 0 & 0 & 1 & 2 & 2 & 1 & 0 & 0 \\
0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0
\end{pmatrix}
$$

**Візуалізація поверненого на 90° гриба:**

<div style="font-family: monospace; line-height: 1; font-size: 1.2rem; letter-spacing: 0.05em;">
⬛⬛⬛⬛⬛⬛⬛⬛⬛⬛<br/>
⬛⬛⬛⬛🔲🔳🔳🔲⬛⬛<br/>
⬛⬛⬛⬛🔳⬜⬜🔳🔲⬛<br/>
⬛🔲🔲🔲⬜🔲⬜⬜🔳⬛<br/>
🔲🔳🔳🔳⬜⬜🔲⬜🔳⬛<br/>
🔲🔳🔳🔳⬜⬜🔲⬜🔳⬛<br/>
⬛🔲🔲🔲⬜🔲⬜⬜🔳⬛<br/>
⬛⬛⬛⬛🔳⬜⬜🔳🔲⬛<br/>
⬛⬛⬛⬛🔲🔳🔳🔲⬛⬛<br/>
⬛⬛⬛⬛⬛⬛⬛⬛⬛⬛
</div>

Тепер наш гриб повернувся на 90° за годинниковою стрілкою – ніжка вказує вліво, а капелюшок вправо!

## Зміна яскравості та контрасту 🔆

### Збільшення яскравості:
$$
\text{Яскравий} = \min(3, \text{Гриб} + 1)
$$

Додаємо 1 до кожного пікселя (але не більше максимуму 3).

**Візуалізація яскравішого гриба:**

<div style="font-family: monospace; line-height: 1; font-size: 1.2rem; letter-spacing: 0.05em;">
🔲🔲🔲🔲🔲🔲🔲🔲🔲🔲<br/>
🔲🔲🔳⬜⬜⬜⬜🔳🔲🔲<br/>
🔲🔳⬜⬜⬜⬜⬜⬜🔳🔲<br/>
🔲⬜⬜⬜🔳🔳⬜⬜⬜🔲<br/>
🔲⬜⬜🔳⬜⬜🔳⬜⬜🔲<br/>
🔲🔳⬜⬜⬜⬜⬜⬜🔳🔲<br/>
🔲🔲🔲🔳⬜⬜🔳🔲🔲🔲<br/>
🔲🔲🔲🔳⬜⬜🔳🔲🔲🔲<br/>
🔲🔲🔲🔳⬜⬜🔳🔲🔲🔲<br/>
🔲🔲🔲🔲🔳🔳🔲🔲🔲🔲
</div>

### Збільшення контрасту:
$$
\text{Контрастний} = \text{round}(1.5 \times (\text{Гриб} - 1.5) + 1.5)
$$

**Як це працює:**
1. **Чому 1.5?** Це середина нашого діапазону кольорів (0-3). Середнє = (0+3)/2 = 1.5
2. **$(\text{Гриб} - 1.5)$** – відхилення від середини:
   - Якщо піксель = 0 (чорний): $0 - 1.5 = -1.5$
   - Якщо піксель = 3 (білий): $3 - 1.5 = +1.5$
3. **$\times 1.5$** – збільшуємо відхилення (коефіцієнт контрасту)
4. **$+ 1.5$** – повертаємо до початкового діапазону
5. **$\text{round}()$** – округлення до найближчого цілого числа ($0.5 \rightarrow 1$, $1.4 \rightarrow 1$, $1.6 \rightarrow 2$)

**Приклади:**
- Піксель = 0: $\text{round}(1.5 \times (0 - 1.5) + 1.5) = \text{round}(-2.25 + 1.5) = \text{round}(-0.75) = 0$
- Піксель = 1: $\text{round}(1.5 \times (1 - 1.5) + 1.5) = \text{round}(-0.75 + 1.5) = \text{round}(0.75) = 1$
- Піксель = 2: $\text{round}(1.5 \times (2 - 1.5) + 1.5) = \text{round}(0.75 + 1.5) = \text{round}(2.25) = 2$
- Піксель = 3: $\text{round}(1.5 \times (3 - 1.5) + 1.5) = \text{round}(2.25 + 1.5) = \text{round}(3.75) = 3$ (обмежуємо максимумом)

Це розтягує значення від середнього, роблячи темні пікселі темнішими, а світлі – світлішими.

**Візуалізація контрастного гриба:**

<div style="font-family: monospace; line-height: 1; font-size: 1.2rem; letter-spacing: 0.05em;">
⬛⬛⬛⬛⬛⬛⬛⬛⬛⬛<br/>
⬛⬛⬛⬜⬜⬜⬜⬛⬛⬛<br/>
⬛⬛⬜⬜⬜⬜⬜⬜⬛⬛<br/>
⬛⬜⬜⬜⬛⬛⬜⬜⬜⬛<br/>
⬛⬜⬜⬛⬜⬜⬛⬜⬜⬛<br/>
⬛⬛⬜⬜⬜⬜⬜⬜⬛⬛<br/>
⬛⬛⬛⬛⬜⬜⬛⬛⬛⬛<br/>
⬛⬛⬛⬛⬜⬜⬛⬛⬛⬛<br/>
⬛⬛⬛⬛⬜⬜⬛⬛⬛⬛<br/>
⬛⬛⬛⬛⬛⬛⬛⬛⬛⬛
</div>

## Композиція зображень – додавання елементів 🎨

Уявімо, що ми хочемо додати траву під грибом:

### Як створюємо матрицю трави:
1. **Верхні 7 рядків = 0**: тут немає трави, це небо та простір для гриба
2. **Рядок 8**: рідкі травинки (1 0 1 0 0 0 0 1 0 1) - окремі стебла
3. **Рядок 9**: густіша трава (1 1 1 1 0 0 1 1 1 1) - більше покриття, але є проміжки
4. **Рядок 10**: земля (2 2 2 2 2 2 2 2 2 2) - суцільний шар світло-сірого кольору

$$
\text{Трава} = \begin{pmatrix}
0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 \\
0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 \\
0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 \\
0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 \\
0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 \\
0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 \\
0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 \\
1 & 0 & 1 & 0 & 0 & 0 & 0 & 1 & 0 & 1 \\
1 & 1 & 1 & 1 & 0 & 0 & 1 & 1 & 1 & 1 \\
2 & 2 & 2 & 2 & 2 & 2 & 2 & 2 & 2 & 2
\end{pmatrix}
$$

**Об'єднання:**
$$
\text{Сцена} = \max(\text{Гриб}, \text{Трава})
$$

Функція `max` бере більше значення для кожного пікселя, щоб трава не "затерла" гриб.

**Візуалізація гриба з травою:**

<div style="font-family: monospace; line-height: 1; font-size: 1.2rem; letter-spacing: 0.05em;">
⬛⬛⬛⬛⬛⬛⬛⬛⬛⬛<br/>
⬛⬛🔲🔳🔳🔳🔳🔲⬛⬛<br/>
⬛🔲🔳⬜⬜⬜⬜🔳🔲⬛<br/>
⬛🔳⬜⬜🔲🔲⬜⬜🔳⬛<br/>
⬛🔳⬜🔲⬜⬜🔲⬜🔳⬛<br/>
⬛🔲🔳⬜⬜⬜⬜🔳🔲⬛<br/>
⬛⬛⬛🔲🔳🔳🔲⬛⬛⬛<br/>
🔲⬛🔲🔲🔳🔳🔲🔲⬛🔲<br/>
🔲🔲🔲🔲🔳🔳🔲🔲🔲🔲<br/>
🔳🔳🔳🔳🔳🔳🔳🔳🔳🔳
</div>

## Фільтри розмиття – згладжування 🌫️

Фільтрація – це процес обробки зображення за допомогою невеликої матриці (ядра), яка "ковзає" по всьому зображенню.

### Фільтр усереднення (Box blur):

$$
\text{Фільтр} = \frac{1}{9} \begin{pmatrix}
1 & 1 & 1 \\
1 & 1 & 1 \\
1 & 1 & 1
\end{pmatrix}
$$

### Як працює фільтрація:

**Приклад для пікселя в позиції (3,4) нашого гриба:**

1. **Вибираємо область 3×3 навколо пікселя:**
   ```
   2 3 3    (значення з матриці гриба)
   3 1 1    центр = позиція (3,4), значення = 1
   3 3 3
   ```

2. **Поелементно множимо на фільтр:**
   ```
   2×(1/9) + 3×(1/9) + 3×(1/9) +
   3×(1/9) + 1×(1/9) + 1×(1/9) +
   3×(1/9) + 3×(1/9) + 3×(1/9)
   ```

3. **Сумуємо результати:**
   ```
   = (2+3+3+3+1+1+3+3+3) / 9
   = 22 / 9
   = 2.44 ≈ 2 (округлюємо)
   ```

4. **Новий піксель = 2** (світло-сірий замість темно-сірого)

**Було:** 🔲 (темно-сірий, значення 1)
**Стало:** 🔳 (світло-сірий, значення 2)

Піксель став світлішим, бо навколо нього більше світлих пікселів!

### Чому це працює:
- **Усереднення**: кожен піксель стає середнім арифметичним своїх сусідів
- **Згладжування**: різкі переходи між кольорами стають плавнішими
- **Видалення шуму**: випадкові яскраві/темні пікселі зникають

### Інші популярні фільтри:
- **Гаусове розмиття**: більша вага центральному пікселю
- **Виявлення країв**: від'ємні значення для контрасту
- **Підвищення різкості**: підсилення центрального пікселя

**Візуалізація розмитого гриба (приблизно):**

<div style="font-family: monospace; line-height: 1; font-size: 1.2rem; letter-spacing: 0.05em;">
⬛⬛🔲🔲🔲🔲🔲🔲⬛⬛<br/>
⬛🔲🔲🔳🔳🔳🔳🔲🔲⬛<br/>
🔲🔲🔳🔳🔳🔳🔳🔳🔲🔲<br/>
🔲🔳🔳🔳🔳🔳🔳🔳🔳🔲<br/>
🔲🔳🔳🔳🔳🔳🔳🔳🔳🔲<br/>
🔲🔲🔳🔳🔳🔳🔳🔳🔲🔲<br/>
⬛🔲🔲🔳🔳🔳🔳🔲🔲⬛<br/>
⬛⬛🔲🔲🔳🔳🔲🔲⬛⬛<br/>
⬛⬛⬛🔲🔲🔲🔲⬛⬛⬛<br/>
⬛⬛⬛🔲🔲🔲🔲⬛⬛⬛
</div>

Контури стали м'якшими, деталі змазалися.

## Практичне застосування в ШІ 🤖

Хоча наш гриб простий, ці самі операції використовуються для:

1. **Аугментація даних**: Обертання, відзеркалення зображень для навчання нейромереж
2. **Попередня обробка**: Нормалізація яскравості та контрасту
3. **Виявлення об'єктів**: Використання масок для виділення регіонів інтересу
4. **Фільтрація**: Видалення шуму, виявлення країв
5. **Стиснення**: Зменшення розміру даних без втрати важливої інформації

## Експерименти для закріплення 🧪

1. **Спробуйте намалювати** свій простий об'єкт матрицею (будиночок, дерево, смайлик)
2. **Застосуйте різні трансформації** і подивіться на результат
3. **Комбінуйте операції**: що буде, якщо спочатку інвертувати кольори, а потім обернути?
4. **Створіть анімацію**: послідовно обертайте зображення на 90°, 180°, 270°

## Підсумок 🎯

Матричні перетворення – це основа обробки зображень:
- ✅ **Прості операції** (додавання, множення) дають складні ефекти
- ✅ **Композиція трансформацій** створює нові можливості
- ✅ **Маски та фільтри** дозволяють працювати з частинами даних
- ✅ **Все це масштабується** – від 10×10 до мільйонів пікселів!

### Ключові ідеї:
1. **Зображення = матриця чисел**
2. **Трансформація = матрична операція**
3. **Композиція = послідовність операцій**
4. **Ефективність = паралельні обчислення**
